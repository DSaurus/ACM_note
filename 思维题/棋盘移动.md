# 思维题

## 2018ICPC焦作现场赛 C

### 题意

　给定一个n*n的棋盘，上面有n个棋子，初始保证每行每列有且仅有一个棋子，没有重叠．有若干种操作，'L k'，'R k'，'U k'，'D k'分别表示把所有棋子向左右上下移动k步，当棋子遇到边界时不能继续走，多个棋子可以在同一格．'? k'询问第k个棋子的当前位置，'!'询问有多少对棋子在同一格．共有m次操作，n,m不超过3e5，多组数据，n,m分别之和不超过1e6．

### 题解
　细节比较多，思路挺简单．假如不碰到边界，只需要维护一个相对原点，每次移动时都移动原点即可．考虑向左移动，若原点不在左边界上，直接移原点即可，否则，会出现棋子合并的情况．由于每行每列都只有一个棋子，左移时合并只会发生在上下边界，除非左右边界即将合并，维护四个边界数组即可，显然合并不会超过O(n)次，总复杂度为O(n)．

[代码](https://github.com/DSaurus/ACM_note/blob/master/data/2018icpc_jiaozuo_c.cpp)
