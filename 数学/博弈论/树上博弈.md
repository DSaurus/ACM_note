# 树上博弈

## 2018字节跳动冬令营网络赛 C. Continued Story

### 题意

给一棵树，树上有边权，双方博弈，每次把边权减1，边权减到0的时候该边就会被砍掉（相应的子树也会被砍掉）

询问先手砍哪些边是必胜的

### 题解

考虑最简单的树上博弈的结论（边权为1），那么当前结点的SG值，就是它所有子树的SG值加1之后全部异或的结果。

假设加入了边权为2的点，考虑当前结点如果连一条边权为2的边到它的孩子，那么这个孩子的贡献应该是多少。

在推理这个的时候，推荐使用打表或者手推，我们会发现边权为2的孩子对当前点的贡献就是SG值（而不是SG值加1）。

接下来考虑边权为3的边连向的孩子，可以推出它们的贡献应该是SG^1。

边权为4的点贡献仍然是SG本身，这样边权为5的就和3的情况相同，所以最后只有3种情况，是1，是偶数，是非1奇数。

最后需要输出砍哪些边，一个方法是快速统计砍一条边以后的SG答案，不过我们会发现这么做并不可行，所以我们采用dfs的方式统计答案。

我们只要知道当前子树需要通过砍边得到什么SG值就可以了，根节点是0，然后进入子树的时候动态更新一下需要的SG值。

综上，复杂度是 O(n) 的

[代码](https://github.com/DSaurus/ACM_note/blob/master/data/bytedance_wc2018_c.cpp)
